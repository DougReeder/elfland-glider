<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Intro - Elfland Glider</title>
    <meta name="description" content="A tranquil action puzzle game for VR and mobile">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Niconne" rel="stylesheet">
    <style>
      html {
        font: 1.5rem Niconne, "Goudy Old Style", Papyrus, serif;
        /*background-image: url("assets/cloud-background.png");*/
        background-position: bottom right;
        background-color: #eeeeee;
      }
      h1 {
        margin: 0.5em;
      }

      .wrapper {
          margin: 1em;
      }
      .wrapper > * {
          margin: 1em;
      }
      @supports (display: grid) {
          .wrapper {
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
              grid-gap: 1em;
              gap: 1em;
          }
          .wrapper > * {
              margin: 0;
          }
      }

      .portraitOnly {
        display: none;
      }
      .landscapeOnly {
        display: block;
      }
      @media only screen and (orientation: portrait) {
        .portraitOnly {
          display: block;
        }
        .landscapeOnly {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <h1 style="text-align:center;">Elfland Glider</h1>
    <div class="wrapper">
      <div id="overview">
        Fly through fantastic worlds,
        help the merry and mischievous light elves,
        & avoid the surly and mischievous dark elves.
      </div>
      <div id="start" style="text-align:center; font-size: xx-large">
        <div>
          <a href="island/">Start!</a>
        </div>
      </div>
      <table id="vrControls">
        <tr><td><b>Tap</b> goggle button to enter VR mode</td>
          <td><span class="a-enter-vr-button" style="position:static; width:50px; display:inline-block; vertical-align:top; cursor:default"></span></td></tr>
        <tr><td colspan="2">The gray triangle above you points the direction you're flying</td></tr>
        <tr><td><b>Tilt</b> your head left to turn glider left</td><td><img src="assets/head-tilt-left.png"></td></tr>
        <tr><td><b>Tilt</b> your head right to turn glider right</td><td><img src="assets/head-tilt-right.png"></td></tr>
        <tr><td colspan="2"><b>Turn</b> your head left or right to look around without turning glider</td></tr>
        <tr><td colspan="2"><b>Tilt</b> your head up to climb (&amp; <b>slow down</b>)</td></tr>
        <tr><td colspan="2"><b>Tilt</b> your head down to descend (&amp; <b>speed up</b>)</td></tr>
        <tr><td colspan="2"><b>Press</b> a controller button to launch</td></tr>
      </table>
      <div style="font-family:serif; font-size:smaller;">
        <div><a href="CREDITS.md">Credits</a></div>
        <div>Uses <a href="https://webvr.info/">WebVR</a> and <a href="https://aframe.io"><nobr>A-Frame</nobr></a>.</div>
        <div>Copyright © 2017-2018 by P. Douglas Reeder; Licensed under the GNU GPL-3.0</div>
        <div><a href="https://github.com/DougReeder/elfland-glider">View source code and contribute</a> </div>
      </div>
    </div>
    <!-- When there's actually something for the user to configure or select, before starting, he/she will do it
    on this page -->
    <script src="https://rawgit.com/aframevr/aframe/a1a142f/dist/aframe-master.min.js"></script>
    <script>
        console.log("checkHeadsetConnected:", AFRAME.utils.device.checkHeadsetConnected());
        console.log("isMobile:", AFRAME.utils.device.isMobile());
        console.log("hasNativeWebVRImplementation:", window.hasNativeWebVRImplementation);
        if (AFRAME.utils.device.isMobile () && ! AFRAME.utils.device.isGearVR() ) {
            var wrapper = document.querySelector('.wrapper');
            var vrControls = document.getElementById('vrControls');

            var tiltControls = document.createElement('div');
            tiltControls.innerHTML =
                "The gray triangle above you points the direction you're flying" +
                '<table style="width:100%">' +
                '<tr><td><b>Roll</b> your device left to turn glider left</td>' +
                  '<td><img src="assets/device-rotate-ccw.png"></td></tr>' +
                '<tr><td><b>Roll</b> your device right to turn glider right</td>' +
                  '<td><img src="assets/device-rotate-cw.png"></td></tr>' +
                '<tr><td colspan="2"><b>Turn</b> your device left or right to look around without turning glider</td></tr>' +
                '<tr><td colspan="2"><b>Tilt</b> your device up to climb (&amp; <b>slow down</b>)</td></tr>' +
                '<tr><td colspan="2"><b>Tilt</b> your device down to descend (&amp; <b>speed up</b>)</td></tr>' +
                '<tr><td colspan="2"><b>Tap</b> the screen to launch</td></tr>' +
                '<tr><td><b>Tap</b> goggle button &amp; place phone in headset to enter VR mode</td>' +
                    '<td><span class="a-enter-vr-button" style="position:static; width:50px; display:inline-block; vertical-align:top; cursor:default"></span></td></tr>' +
                '</table>';

            wrapper.replaceChild(tiltControls, vrControls);
        } else if (! AFRAME.utils.device.checkHeadsetConnected() && ! AFRAME.utils.device.isMobile()) {
            var wrapper = document.querySelector('.wrapper');
            var vrControls = document.getElementById('vrControls');

            var keyboardControls = document.createElement('div');
            keyboardControls.innerHTML =
                'Elfland Glider is designed for VR or mobile, but if you want to try it here:<br><br>' +
                "The gray triangle above you points the direction you're flying" +
                '<table style="width:100%">' +
                '<tr><td>A or left-arrow</td><td>turn glider left</td></tr>' +
                '<tr><td>D or right-arrow</td><td>turn glider right</td></tr>' +
                '<tr><td>W or up-arrow</td><td>climb (&amp; <b>slow down</b>)</td></tr>' +
                '<tr><td>S or down-arrow</td><td>descend (&amp; <b>speed up</b>)</td></tr>' +
                '<tr><td>space bar</td><td>launch</td></tr>' +
//                '<tr><td>drag left or right</td><td>look around without turning glider</td></tr>' +
                '<tr><td><span class="a-enter-vr-button" style="position:static; width:50px; display:inline-block; vertical-align:top; cursor:default"></span></td>' +
                '            <td>enter fullscreen mode</td></tr>' +
                '</table>';

            wrapper.replaceChild(keyboardControls, vrControls);
        }

        if (AFRAME.utils.device.isMobile() && ! AFRAME.utils.device.isGearVR() && ! (AFRAME.scenes[0] && AFRAME.scenes[0].is("vr-mode"))) {
            let start = document.getElementById('start');
            let linkHolder = start.firstElementChild;
            linkHolder.classList.add('landscapeOnly');
            start.insertAdjacentHTML('beforeend', '<div class="portraitOnly" style="color:red">Please rotate your device to landscape mode. &#x21B6;</div>');
        }

        if (! window.hasNativeWebVRImplementation) {
            let overview = document.getElementById('overview');
            overview.insertAdjacentHTML('afterend', '<div>This browser lacks <a href="https://webvr.info/">native WebVR</a>,' +
                ' so don\'t complain about performance. </div>')
        }
    </script>
  </body>
</html>
<!-- Copyright © 2017-2018 by P. Douglas Reeder; Licensed under the GNU GPL-3.0 -->
