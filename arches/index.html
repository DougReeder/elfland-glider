<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Arches - Elfland Glider</title>
    <meta name="description" content="Collect all the stars">
    <meta http-equiv="origin-trial" data-feature="WebXR Device API (For Chrome M69+)" data-expires="2018-10-31" content="Auz1R4UYLFJhpQ86Jm18Z/Pn2XYl91mTgxMqG7jPmFLarPnkzHrUFaf5Q62zPID/pAnkUwARE1pzmp+zmHjz3A0AAABfeyJvcmlnaW4iOiJodHRwczovL2VsZmxhbmQtZ2xpZGVyLnN1cmdlLnNoOjQ0MyIsImZlYXR1cmUiOiJXZWJYUkRldmljZU02OSIsImV4cGlyeSI6MTU0MTAwNzg0NH0=">
    <meta http-equiv="origin-trial" data-feature="WebXR Gamepad Support" data-expires="2018-10-31" content="Ai1s/48WTsfLMLFmJvltEdiaOFIWwS6fz3F1FF59t9Kti1m9tI3PCEUt86ViJ/wZT5PkPFrIIZkpkPmMlPAHdQEAAABkeyJvcmlnaW4iOiJodHRwczovL2VsZmxhbmQtZ2xpZGVyLnN1cmdlLnNoOjQ0MyIsImZlYXR1cmUiOiJXZWJYUkdhbWVwYWRTdXBwb3J0IiwiZXhwaXJ5IjoxNTQxMDA3ODQ0fQ==">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.0.14/howler.core.min.js"></script>
    <script src="https://rawgit.com/aframevr/aframe/a1a142f/dist/aframe-master.min.js"></script>
    <script src="../assets/look-fly-controls.js"></script>
    <script src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdn.rawgit.com/DougReeder/aframe-button-controls/v1.0.0/aframe-button-controls.js"></script>
    <script src="../assets/elfland-utils.js"></script>
    <script src="https://unpkg.com/aframe-state-component@^3.2.4/dist/aframe-state-component.min.js"></script>
    <script src="../assets/state.js"></script>
    <script src="https://unpkg.com/aframe-aabb-collider-component@^2.2.1/dist/aframe-aabb-collider-component.min.js"></script>
    <script src="../assets/stella-octangula.js"></script>
    <script src="https://unpkg.com/aframe-glow@^1.0.1/dist/aframe-glow-component.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Niconne" rel="stylesheet">
    <script src="../assets/intro.js"></script>
    <script>
        AFRAME.registerComponent('arches', {
            init: function () {
                this.el.emit('countYellowStars', {});
            }
        });
    </script>
</head>
<body>
<a-scene arches cursor="rayOrigin: mouse">
    <a-assets>
        <a-asset-item id="stabbur" src="../assets/stabbur/scene.gltf"></a-asset-item>
    </a-assets>

    <a-entity environment="preset: arches;" class="landscape"></a-entity>
    <a-gltf-model position="0 0 10" src="#stabbur" scale="2 2 2" class="landscape"></a-gltf-model>

    <a-entity class="star" position="-4 15 4"
              geometry="primitive:triangle; vertexA:-1.5 -1.5 -1.5; vertexB:1.5 -1.5 1.5; vertexC:1.5 1.5 -1.5"
              material="visible:false">
        <a-entity rotation="45 0 45" geometry="primitive: stella-octangula"
              material="color:#ffce00" glow="c: 0.2; color: #feca05; scale:3.5"></a-entity>
    </a-entity>
    <a-entity class="star" position="-30 5 30"
              geometry="primitive:triangle; vertexA:-1.5 -1.5 -1.5; vertexB:1.5 -1.5 1.5; vertexC:1.5 1.5 -1.5"
              material="visible:false">
        <a-entity rotation="45 0 45" geometry="primitive: stella-octangula"
              material="color:#ffce00" glow="c: 0.2; color: #feca05; scale:3.5"></a-entity>
    </a-entity>
    <a-entity class="star" position="15 11 -33"
              geometry="primitive:triangle; vertexA:-1.5 -1.5 -1.5; vertexB:1.5 -1.5 1.5; vertexC:1.5 1.5 -1.5"
              material="visible:false">
        <a-entity rotation="45 0 45" geometry="primitive: stella-octangula"
              material="color:#ffce00" glow="c: 0.2; color: #feca05; scale:3.5"></a-entity>
    </a-entity>
    <a-entity class="star" position="-87.3 8 78"
              geometry="primitive:triangle; vertexA:-1.5 -1.5 -1.5; vertexB:1.5 -1.5 1.5; vertexC:1.5 1.5 -1.5"
              material="visible:false">
        <a-entity rotation="45 0 45" geometry="primitive: stella-octangula"
              material="color:#ffce00" glow="c: 0.2; color: #feca05; scale:3.5"></a-entity>
    </a-entity>
    <a-entity class="star" position="41 5 -41"
              geometry="primitive:triangle; vertexA:-1.5 -1.5 -1.5; vertexB:1.5 -1.5 1.5; vertexC:1.5 1.5 -1.5"
              material="visible:false">
        <a-entity rotation="45 0 45" geometry="primitive: stella-octangula"
              material="color:#ffce00" glow="c: 0.2; color: #feca05; scale:3.5"></a-entity>
    </a-entity>
    <a-entity class="star" position="22 10 28"
              geometry="primitive:triangle; vertexA:-1.5 -1.5 -1.5; vertexB:1.5 -1.5 1.5; vertexC:1.5 1.5 -1.5"
              material="visible:false">
        <a-entity rotation="45 0 45" geometry="primitive: stella-octangula"
              material="color:#ffce00" glow="c: 0.2; color: #feca05; scale:3.5"></a-entity>
    </a-entity>
    <a-entity class="star" position="-40 5 -40"
              geometry="primitive:triangle; vertexA:-1.5 -1.5 -1.5; vertexB:1.5 -1.5 1.5; vertexC:1.5 1.5 -1.5"
              material="visible:false">
        <a-entity rotation="45 0 45" geometry="primitive: stella-octangula"
              material="color:#ffce00" glow="c: 0.2; color: #feca05; scale:3.5"></a-entity>
    </a-entity>

    <a-entity id="nextQuestPortal" position="0 15 -80" scale="5 5 0"
              link="href:../yggdrasil; title: Next Quest; image:../yggdrasil/screenshot-yggdrasil.png; on:hitstart"
              bind="visible: questComplete"></a-entity>

    <a-text id="prelaunchHelp" position="-25 17 25" rotation="0 -45 0" width="12" align="center" font="../assets/mozillavr.fnt" value="Collect all the stars."></a-text>

    <a-text id="debugDisplay" position="0 13 -0.5" rotation="0 15 0" width="30" align="left" value="Message" geometry="primitive:plane; width:10; height:1.4;"
            material="color: gray" bind="text.value: stars"></a-text>

    <a-entity id="armature" geometry="primitive: box; width: 2; height: 2; depth: 2" material="visible:false"
              bind__position="gliderPosition" bind__rotation.y="gliderRotationY" armature-tick-state
              aabb-collider="objects:.star,[link]" >
        <a-entity id="glider" position="0 0 0" bind__rotation.x="gliderRotationX"
                  raycaster="objects:.landscape; far:0.5;">
            <a-entity id="headingTriangle" position="0 1.5 0"
                      geometry="primitive:triangle; vertexA:0 0 -4.25; vertexB:0.1 0 0; vertexC:-0.1 0 0;"
                      material="shader: flat; transparent:true; opacity:0.2; color:black;"></a-entity>
        </a-entity>
        <a-entity id="body">
            <a-entity camera="" look-fly-controls="">
                <a-text id="hud" position="0.2 0.42 -0.75" rotation="30 -20 0" width="2" align="center" value="HUD"
                        geometry="primitive:plane; width:0.14; height:0.1;"
                        material="color: gray; opacity: 0.7" bind__text="value: hudText" bind__visible="hudVisible"></a-text>
            </a-entity>
        </a-entity>
        <a-entity button-controls></a-entity>
    </a-entity>
</a-scene>
<!-- Copyright Â© 2017-2018 by P. Douglas Reeder; Licensed under the GNU GPL-3.0 -->
</body>
</html>
